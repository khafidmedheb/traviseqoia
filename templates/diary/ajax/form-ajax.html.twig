{% extends 'base-diary.html.twig' %}

{% block body %}
<h2>Formulaire test Ajax</h2>
<form>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputEmail4">Email</label>
      <input type="email" class="form-control" id="inputEmail4" placeholder="Email">
    </div>
    <div class="form-group col-md-6">
      <label for="inputPassword4">Password</label>
      <input type="password" class="form-control" id="inputPassword4" placeholder="Password">
    </div>
  </div>
  <div class="form-group">
    <label for="inputAddress">Address</label>
    <input type="text" class="form-control" id="inputAddress" placeholder="1234 Main St">
  </div>
  <div class="form-group">
    <label for="inputAddress2">Address 2</label>
    <input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor">
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputCity">City</label>
      <input type="text" class="form-control" id="inputCity">
    </div>
    <div class="form-group col-md-4">
      <label for="inputState">State</label>
      <select id="inputState" class="form-control">
        <option selected>Choose...</option>
        <option>...</option>
      </select>
    </div>
    <div class="form-group col-md-2">
      <label for="inputZip">Zip</label>
      <input type="text" class="form-control" id="inputZip">
    </div>
  </div>
  <div class="form-group">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="gridCheck">
      <label class="form-check-label" for="gridCheck">
        Check me out
      </label>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Sign in</button>
</form>
<br><br>
    <h3>Bouton test Ajax</h3>
    <form action="form-ajax_submit" method="get" accept-charset="utf-8">
        <button id="ajbutton" class="ajax">Click me !</button>
    </form>

    <div id="ajax-results">Here comes the result</div>
    <br><br>
    <h4>Liste d√©roulante test Ajax !</h4>
    <select id="menu" name="form-ajax">
    	<option value="Techno1">Techno 1</option>
    	<option value="Techno2">Techno 2</option>
    	<option value="Techno3">Techno 3</option>
    	<option value="Techno4">Techno 4</option>
    </select>
    <br><br>
    <div id="menu-result">Choix ???</div>

    	
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">

    $(document).ready(function(){

        $("#ajbutton").on('click', function() {
           that = $(this).text();
           $.ajax({
               url:'{{ path('ajax_request') }}',
               type: "POST",
               dataType: "json",
               data: {"btnclick": that},
               async: true,
               success: function (data)
               {
                    console.log(data)
                    $('div#ajax-results').html(data.output);
               },
               error: function (err) {
                    alert("An error ocurred while loading data from the button ...");
               }
           });
           return false;
        });


        $("#menu").on("change", function(){
             that = $(this).val();
             var data = {'choice': that};
            $.ajax({
                url: "{{path('ajax_request')}}", 
                type: "POST",
                dataType: "json",
                data: data,
                async: true,
                success: function (data)
                {
                    console.log(data)
                    $('div#menu-result').html(data.output);
                },
                error: function (err) {
                    alert("An error ocurred while loading data from the list ...");
                }
            }); 

            return false; 
        });
 
    });

</script>
{% endblock %}